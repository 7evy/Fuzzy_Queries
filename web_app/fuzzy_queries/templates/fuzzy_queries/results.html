<html lang="en">
<head>
    <meta charset="Utd-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHOCOLATE</title>
</head>
{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'fuzzy_queries/css/index.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'fuzzy_queries/css/result.css' %}">

<script type="text/javascript" charset="utf-8">

    function satisfied(apps,value){
        var string = apps.replace(/'/gi,"\"")
        string = string.replace(/True/gi,"\"True\"")
        string = string.replace(/False/gi,"\"False\"")
        var obj = JSON.parse(string)
        var val = parseFloat(value)
        var sat = obj.score*val
        console.log(sat,val)
    }

</script>


<body>
    <div>
        <table>
            <caption>Exemples représentatifs</caption>
            <tr>
                <th>Type</th>
                <th>Surface</th>
                <th>Pièces</th>
                <th>Chambres</th>
                <th>Loyer</th>
                <th>Meublé</th>
                <th>Jardin</th>
                <th>Terrasse</th>
                <th>Distance Centre</th>
                <th>Distance Transport</th>
                <th>Distance Commerce</th>
            </tr>
            {% for apps in examples %}
                <tr>
                    <td>{{apps.type}}</td>
                    <td>{{apps.surface}}</td>
                    <td>{{apps.pieces}}</td>
                    <td>{{apps.chambres}}</td>
                    <td>{{apps.loyer}}</td>
                    <td>{{apps.meuble}}</td>
                    <td>{{apps.jardin}}</td>
                    <td>{{apps.terrasse}}</td>
                    <td>{{apps.dist_centre}}</td>
                    <td>{{apps.dist_transport}}</td>
                    <td>{{apps.dist_commerce}}</td>
                </tr>
            {% endfor %}
        </table>  
    </div>
    <div>
        <table>
            <caption>Résultats</caption>
            <tr>
                <th>Type</th>
                <th>Surface</th>
                <th>Pièces</th>
                <th>Chambres</th>
                <th>Loyer</th>
                <th>Meublé</th>
                <th>Jardin</th>
                <th>Terrasse</th>
                <th>Distance Centre</th>
                <th>Distance Transport</th>
                <th>Distance Commerce</th>
                <th>Taux d'appartenance</th>
            </tr>
            {% for apps in immo %}
                <tr>
                    <td>{{apps.type}}</td>
                    <td>{{apps.surface}}</td>
                    <td>{{apps.pieces}}</td>
                    <td>{{apps.chambres}}</td>
                    <td>{{apps.loyer}}</td>
                    <td>{{apps.meuble}}</td>
                    <td>{{apps.jardin}}</td>
                    <td>{{apps.terrasse}}</td>
                    <td>{{apps.dist_centre}}</td>
                    <td>{{apps.dist_transport}}</td>
                    <td>{{apps.dist_commerce}}</td>
                    <td>{{apps.score}}</td>
                    <td>
                        <ul class="likert">
                            <li> Pas satisfait </li>
                            <li><input type="radio" name="{{apps}}" value="0.2" onclick="satisfied(this.getAttribute('name'),this.getAttribute('value'))" /></li>
                            <li><input type="radio" name="{{apps}}" value="0.4" onclick="satisfied(this.getAttribute('name'),this.getAttribute('value'))"/></li>
                            <li><input type="radio" name="{{apps}}" value="0.6" onclick="satisfied(this.getAttribute('name'),this.getAttribute('value'))"/></li>
                            <li><input type="radio" name="{{apps}}" value="0.8" onclick="satisfied(this.getAttribute('name'),this.getAttribute('value'))"/></li>
                            <li><input type="radio" name="{{apps}}" value="1" onclick="satisfied(this.getAttribute('name'),this.getAttribute('value'))"/></li>
                            <li> Très satisfait </li>
                      </ul>
                    </td>
                </tr>
            {% endfor %}
        </table> 
    </div>
</body>
</html>